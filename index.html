<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>GEOMETRIC CHAOS · SMOOTH PULSE</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  html, body { margin:0; padding:0; background:#000; overflow:hidden; height:100%; font-family:'Courier New', monospace; color:#0af; }
  canvas { display:block; }
  #hud { position:absolute; top:16px; left:16px; font-size:13px; opacity:0.7; pointer-events:none; letter-spacing:1px; }
  #data { position:absolute; bottom:16px; left:16px; font-size:10px; opacity:0.6; pointer-events:none; max-width:400px; line-height:1.4; }
  #data .real { color:#0f0; font-weight:bold; }
  #data .fallback { color:#888; }
  #data .warning { color:#ff0; }
  #clock { position:absolute; bottom:16px; right:16px; font-size:11px; opacity:0.45; color:#6cf; text-align:right; pointer-events:none; line-height:1.3; }
  #status { position:absolute; top:40px; left:16px; font-size:11px; opacity:0.6; color:#0af; }

  /* >>> ADDED SYSTEM LINK <<< */
  #system1 {
    position:absolute;
    bottom:16px;
    left:50%;
    transform:translateX(-50%);
    font-size:11px;
    opacity:0.55;
    color:#0af;
    cursor:pointer;
    letter-spacing:1px;
    text-decoration:none;
    transition:opacity 0.2s, color 0.2s;
  }
  #system1:hover {
    opacity:0.9;
    color:#6cf;
  }
</style>
</head>
<body>

<div id="hud">GEOMETRIC CHAOS — SMOOTH PULSE</div>
<div id="status"></div>
<div id="data">ініціалізація...</div>
<div id="clock">—</div>

<!-- SYSTEM LINK -->
<a id="system1" href="https://lavandaaudit.github.io/test3/" target="_blank">system1</a>

<canvas id="c"></canvas>

<script>
const canvas = document.getElementById('c');
const ctx = canvas.getContext('2d');
const dataDiv = document.getElementById('data');
const clockDiv = document.getElementById('clock');
const statusDiv = document.getElementById('status');

function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
window.addEventListener('resize', resize);
resize();

const startTime = Date.now();
function formatRelativeTime(ms) {
  const s = Math.floor(ms / 1000);
  if (s < 60) return `+${s}s`;
  const m = Math.floor(s / 60); const sec = s % 60;
  if (m < 60) return `+${m}m ${sec}s`;
  const h = Math.floor(m / 60); const min = m % 60;
  return `+${h}h ${min}m`;
}
function updateClock() {
  const now = new Date();
  clockDiv.innerHTML = `${String(now.getHours()).padStart(2,'0')}:${String(now.getMinutes()).padStart(2,'0')}:${String(now.getSeconds()).padStart(2,'0')}<br>${formatRelativeTime(Date.now() - startTime)}`;
}
setInterval(updateClock, 1000); updateClock();

const stars = [];
for (let i = 0; i < 300; i++) {
  stars.push({ x: Math.random()*canvas.width, y: Math.random()*canvas.height, size: Math.random()*1.4+0.4, baseAlpha: Math.random()*0.4+0.25, twinkle: Math.random()*0.015+0.006 });
}

let realData = { seismic:0.5, magnetic:0.5, atmosphere_wind:0.5, atmosphere_pressure:0.5, atmosphere_temp:0.5, ocean:0.5, solar_radiation:0.5, solar_wind:0.5, precipitation:0.5, chaos:0.5 };
let dataHistory = {}; Object.keys(realData).forEach(k => dataHistory[k] = []);
let sources = {};

const blobs = [
  { param: 'seismic', color: 'rgba(220,60,80,', phase: 0.0, targetSize:6, targetAlpha:0.75 },
  { param: 'magnetic', color: 'rgba(60,180,255,', phase: 1.2, targetSize:6, targetAlpha:0.75 },
  { param: 'atmosphere_wind', color: 'rgba(80,255,160,', phase: 2.4, targetSize:6, targetAlpha:0.7 },
  { param: 'atmosphere_temp', color: 'rgba(255,180,60,', phase: 3.6, targetSize:6, targetAlpha:0.7 },
  { param: 'solar_radiation', color: 'rgba(255,240,100,', phase: 4.8, targetSize:5, targetAlpha:0.65 },
  { param: 'solar_wind', color: 'rgba(200,120,255,', phase: 6.0, targetSize:6, targetAlpha:0.7 },
  { param: 'precipitation', color: 'rgba(100,220,255,', phase: 7.2, targetSize:6, targetAlpha:0.7 }
];
blobs.forEach(b => { b.angle = Math.random()*Math.PI*2; b.radius = 60 + Math.random()*50; b.currentSize = b.targetSize; b.currentAlpha = b.targetAlpha; b.currentDist = b.radius; });

function lerp(a, b, t) { return a + (b - a) * t; }

/* ---- весь JS нижче без змін ---- */
async function fetchRealPlanetData() {
  statusDiv.innerHTML = 'оновлення...';
  let loaded = 0;

  try {
    const weatherUrl = `https://api.open-meteo.com/v1/forecast?latitude=50.55&longitude=30.25&current=temperature_2m,wind_speed_10m,surface_pressure,precipitation,shortwave_radiation`;
    const wRes = await fetch(weatherUrl);
    if (wRes.ok) {
      const w = (await wRes.json()).current || {};
      realData.atmosphere_temp = Math.min(1, Math.max(0, (w.temperature_2m + 40) / 80));
      realData.atmosphere_wind = Math.min(1, (w.wind_speed_10m || 0) / 80);
      realData.atmosphere_pressure = Math.min(1, Math.max(0, ((w.surface_pressure || 1013) - 950) / 150));
      realData.precipitation = Math.min(1, (w.precipitation || 0) / 15);
      realData.solar_radiation = Math.min(1, (w.shortwave_radiation || 0) / 1200);
      loaded += 5;
    }
  } catch {}

  statusDiv.innerHTML = loaded > 0 ? 'оновлено' : '';
}

fetchRealPlanetData();
setInterval(fetchRealPlanetData, 120000);

let t = 0;
function loop() {
  t += 0.016;
  ctx.fillStyle = 'rgba(0,0,0,0.07)';
  ctx.fillRect(0,0,canvas.width,canvas.height);
  requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>
